<div class="select-datetime-container">
  <!-- Collapsed Service Selection Section -->
  <div class="collapsed-section">
    <div class="collapsed-header">
      <h3 class="collapsed-title">Select Service</h3>
      <mat-icon class="collapse-icon">expand_more</mat-icon>
    </div>
    <mat-icon class="check-icon">check_circle</mat-icon>
  </div>

  <!-- Date & Time Selection Section -->
  <div class="datetime-section">
    <h2 class="section-title">Select Date & Time</h2>
    
    <div class="datetime-content">
      <!-- Calendar Section -->
      <div class="calendar-section">
        <div class="calendar-header">
          <div class="date-label">
            <mat-icon class="calendar-icon">calendar_today</mat-icon>
            <span>Preferred Date</span>
          </div>
          <mat-form-field appearance="outline" class="frequency-field">
            <mat-select [value]="selectedFrequency || 'Monthly'" (selectionChange)="onFrequencyChange($event.value)">
              <mat-option value="Monthly">Monthly</mat-option>
              <mat-option value="Weekly">Weekly</mat-option>
              <mat-option value="Daily">Daily</mat-option>
            </mat-select>
          </mat-form-field>
        </div>

        <!-- Dual Month Calendar -->
        <div class="dual-calendar">
          <div class="calendar-month">
            <div class="month-header">
              <button mat-icon-button (click)="previousMonth()">
                <mat-icon>chevron_left</mat-icon>
              </button>
              <span class="month-title">{{ currentMonth | date: 'MMMM yyyy' }}</span>
            </div>
            <div class="calendar-grid">
              <div class="day-header">S</div>
              <div class="day-header">M</div>
              <div class="day-header">T</div>
              <div class="day-header">W</div>
              <div class="day-header">T</div>
              <div class="day-header">F</div>
              <div class="day-header">S</div>
              <div 
                *ngFor="let day of getDaysInMonth(currentMonth)" 
                class="calendar-day"
                [class.selected]="isDateSelected(day)"
                [class.today]="isToday(day)"
                [class.disabled]="!day"
                (click)="selectDate(day)">
                {{ day || '' }}
              </div>
            </div>
          </div>

          <div class="calendar-month">
            <div class="month-header">
              <span class="month-title">{{ secondMonth | date: 'MMMM yyyy' }}</span>
              <button mat-icon-button (click)="nextMonth()">
                <mat-icon>chevron_right</mat-icon>
              </button>
            </div>
            <div class="calendar-grid">
              <div class="day-header">S</div>
              <div class="day-header">M</div>
              <div class="day-header">T</div>
              <div class="day-header">W</div>
              <div class="day-header">T</div>
              <div class="day-header">F</div>
              <div class="day-header">S</div>
              <div 
                *ngFor="let day of getDaysInMonth(secondMonth)" 
                class="calendar-day"
                [class.selected]="isDateSelected(day, true)"
                [class.disabled]="!day"
                (click)="selectDateNextMonth(day)">
                {{ day || '' }}
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Time Slot Section -->
      <div class="time-slot-section">
        <div class="time-slot-header">
          <mat-icon class="clock-icon">schedule</mat-icon>
          <span>Preferred Time Slot</span>
        </div>
        
        <div class="time-slots-grid">
          <button 
            *ngFor="let slot of timeSlots" 
            mat-stroked-button 
            class="time-slot-button"
            [class.selected]="isTimeSlotSelected(slot.id)"
            (click)="onTimeSlotSelect(slot)">
            {{ getTimeSlotDisplay(slot) }}
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
